<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="å¤§éŸ³å¸Œå£°ï¼Œå¤§è±¡æ— å½¢">
    <meta name="keyword" content>
<!--    <link rel="shortcut icon" href="/img/ironman-draw.png">-->
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <title>
        
          hexoåšå®¢å‘å¸ƒä¹‹åçš„æ‚è°ˆ - ç‹æ˜ä¼Ÿ | Blog
        
    </title>

    <link rel="canonical" href="https://fighting-top.github.io/æŠ€æœ¯åˆ†äº«/hexo-addition/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/beantech.min.css">

    <link rel="stylesheet" href="/css/donate.css">

    <!-- Pygments Highlight CSS -->
    <link rel="stylesheet" href="/css/highlight.css">

    <link rel="stylesheet" href="/css/widget.css">

    <link rel="stylesheet" href="/css/rocket.css">

    <link rel="stylesheet" href="/css/signature.css">

    <link rel="stylesheet" href="/css/toc.css">

    <!-- Custom Fonts -->
    <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <!-- Hux Delete, sad but pending in China
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/
    css'>
    -->


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>
</head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">
	<!-- Modified by Yu-Hsuan Yen -->
<!-- Post Header -->
<style type="text/css">
    header.intro-header{
        
            background-image: url('/img/article_header/article_header.png')
            /*post*/
        
    }
    
</style>

<header class="intro-header" >
    <!-- Signature -->
    <div id="signature">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                
                    <div class="post-heading">
                        <div class="tags">
                            
                              <a class="tag" href="/tags/#Hexo" title="Hexo">Hexo</a>
                            
                              <a class="tag" href="/tags/#blog" title="blog">blog</a>
                            
                              <a class="tag" href="/tags/#PWA" title="PWA">PWA</a>
                            
                              <a class="tag" href="/tags/#AMP" title="AMP">AMP</a>
                            
                              <a class="tag" href="/tags/#HTTPS" title="HTTPS">HTTPS</a>
                            
                        </div>
                        <h1>hexoåšå®¢å‘å¸ƒä¹‹åçš„æ‚è°ˆ</h1>
                        <h2 class="subheading"></h2>
                        <span class="meta">
                            Posted by WangMingwei on
                            2019-09-17
                        </span>
                    </div>
                


                </div>
            </div>
        </div>
    </div>
</header>

	
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Tiger&#39;s blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>

                    

                        
                    

                        
                        <li>
                            <a href="/archive/">Archives</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/about/">About</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/tags/">Tags</a>
                        </li>
                        
                    
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Main Content -->
    <!-- Modify by Yu-Hsuan Yen -->

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <h1><a href="#https-http2"></a>HTTPS &amp; HTTP/2</h1>
<p>ç°åœ¨æ˜¯ 2019 å¹´äº†ï¼Œç½‘ç«™ä¸æ˜¯ HTTPS å’Œ HTTP/2 çš„æ„Ÿè§‰è„±ç¦»æ—¶ä»£äº†ã€‚HTTPS å·²ç»ä¸æ˜¯å› ä¸ºå®‰å…¨æ–¹é¢çš„é—®é¢˜æ¥è€ƒè™‘çš„äº†ï¼Œè€Œæ˜¯åé¢æ‰€è®²åˆ°çš„ PWA é‡Œé¢å¾ˆå¤šæœ€æ–°çš„ HTML5 API éƒ½æ˜¯è¦æ±‚åœ¨ HTTPS ç¯å¢ƒä¸‹æ‰èƒ½æ­£å¸¸å·¥ä½œçš„ï¼Œæ‰€ä»¥è¦æƒ³è®©æˆ‘ä»¬çš„åšå®¢æ›´åŠ çš„å®Œç¾ï¼Œå¿…é¡»è¦æä¾› HTTPS ç¯å¢ƒã€‚</p>
<p>å¯æ˜¯ï¼Œæˆ‘å¹¶æ²¡æœ‰ä¸»æœºå•Šï¼Œæ²¡æœ‰æœåŠ¡å™¨ï¼Œæ€ä¹ˆé…è¯ä¹¦ï¼Ÿæœ‰ä¸»æœºçš„åœŸè±ªçš„ HTTPS è¯ä¹¦å¯ä»¥é€šè¿‡ <a href="https://letsencrypt.org/" target="_blank" rel="noopener">Letâ€™s Encrypt</a> è·å–å…è´¹çš„ï¼Œè¿™ä¸ªåœ°æ–¹ä¸æ·±å…¥è®²äº†ï¼Œå¯ä»¥å‚è€ƒ <a href="https://lavas.baidu.com/guide/vue/doc/vue/advanced/https-deploy" target="_blank" rel="noopener">HTTPS ç¯å¢ƒéƒ¨ç½²</a>ã€‚</p>
<p>æˆ‘ä»¬ä»Šå¤©ä»‹ç»å¦ä¸€ä¸ªå…è´¹çš„ä¸œè¥¿ï¼Œä¸ç”¨æœåŠ¡å™¨é…ç½®è¯ä¹¦ï¼Œé€šè¿‡ DNS ä»£ç†çš„å½¢å¼ï¼Œç›´æ¥å¯ä»¥åšåˆ° HTTPS &amp; HTTP/2 æ¥å…¥ï¼Œè¿™ä¸ªä¸œè¥¿å« <a href="https://www.cloudflare.com/" target="_blank" rel="noopener">cloudflare</a></p>
<p>ç®€å•çš„ä»‹ç»ä¸€ä¸‹æ­¥éª¤ï¼š</p>
<ul>
<li>ä¸Š cloudflare æ³¨å†Œä¸€ä¸ªè´¦å·</li>
<li>æ·»åŠ ä½ çš„åŸŸå</li>
<li>é€‰æ‹© Free Plan</li>
<li>æ ¹æ®æç¤ºè¿›è¡Œä¸€ç³»åˆ—çš„é…ç½®ï¼ˆå°±æ˜¯äº›é€‰é¡¹ï¼‰</li>
<li>æœ€åä¼šç”Ÿæˆä¸¤ä¸ª DNS çš„æœåŠ¡å™¨åœ°å€</li>
<li>è¿›å…¥ä½ çš„åŸŸåè¿è¥å•†çš„é…ç½®åå°ï¼Œå°†é»˜è®¤çš„ DNS æœåŠ¡é…ç½®æˆ cloudflare ç”Ÿæˆçš„ä¸¤ä¸ª DNS æœåŠ¡åœ°å€</li>
</ul>
<p>ç”±äº DNS æœåŠ¡å…¨çƒæ›´æ–°é€Ÿåº¦è¾ƒæ…¢ï¼Œå¯èƒ½å¾—ç­‰ä¸ªä¸€å¤©ä¸¤å¤©çš„æœåŠ¡æ‰èƒ½ç¨³å®šè®¿é—®ã€‚æ€»ä¹‹ï¼Œè¿™æ—¶å€™ï¼Œä½ çš„ç«™ç‚¹å·²ç»æ˜¯ HTTPS &amp; HTTP/2 çš„ç«™ç‚¹äº†ã€‚</p>
<blockquote>
<p>cloudflare çš„é…ç½®æœ‰å¾ˆå¤šï¼Œå¯ä»¥åœ¨åå°è¿›è¡Œé…ç½®ï¼ŒSSL éœ€è¦é€‰æ‹© <code>FULL</code>, å¹¶ä¸”è®¾ç½® <code>HTTP REWRITE</code> è®©ç«™ç‚¹èƒ½è‡ªåŠ¨ä» HTTP é‡å®šå‘åˆ° HTTPSã€‚è¿˜æœ‰å¾ˆå¤šæœ‰ç”¨çš„é…ç½®ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±æŠŠç©ã€‚</p>
</blockquote>
<h1><a href="#amp"></a>æ„å»º AMP</h1>
<p><a href="https://www.ampproject.org/zh_cn/learn/overview/" target="_blank" rel="noopener">AMP</a> æ˜¯ Google æ¨å‡ºçš„ä¸€ç§ç½‘é¡µåŠ é€Ÿçš„æ ‡å‡†ï¼Œé€šè¿‡è¿™ç§æ ‡å‡†ï¼Œå¯ä»¥ä½¿ä½ çš„ç«™ç‚¹åœ¨ Google æœç´¢ç»“æœé¡µï¼ˆè¿™é‡Œæ˜¯ä¸€ä¸ªå¿§ä¼¤çš„æ•…äº‹ï¼Œä½†æ˜¯è¿™å¹¶ä¸å½±å“æˆ‘ä»¬æŠ˜è…¾åšå®¢çš„æ¿€æƒ…ï¼‰ä¹‹åçš„è·³è½¬å˜å¾—é€Ÿåº¦è¶…å¿«ï¼Œå…·ä½“å¯ä»¥è¯¦æƒ…è§ AMP çš„å®˜ç½‘ï¼ŒGoogle è¿˜ä¼šå¯¹ AMP çš„ç«™ç‚¹æœ‰ä¸€å®šçš„è°ƒæƒï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ çš„åšå®¢æä¾›äº† AMP çš„é¡µé¢ï¼Œå°†ä¼šè¢« Google æ›´å®¹æ˜“æŠ“å–å’Œä¼˜å…ˆå±•ç°ï¼Œå¹¶ä¸”èƒ½å¤Ÿåœ¨ Google çš„æœç´¢ç»“æœé¡µç§’å¼€ã€‚</p>
<p>å¹¶ä¸”ç”±äº AMP é¡µé¢çš„æ—  block çš„å¤„ç†ï¼Œè®©ç”¨æˆ·åœ¨å•ç‹¬è®¿é—®ä½ çš„ AMP é¡µé¢çš„æ—¶å€™ä¹Ÿæœ‰ç§’å¼€çš„ä½“éªŒã€‚è¿˜æ˜¯å¾ˆæ‡µé€¼ï¼Ÿä»€ä¹ˆæ˜¯ AMPï¼Ÿå…¶å®å°±æ˜¯ä¸€ä¸ª HTML é¡µé¢ï¼ŒçŸ¥è¯†éµå®ˆ AMP è§„èŒƒçš„é¡µé¢ï¼Œå°±æƒ³ä½ ç°åœ¨åœ¨çœ‹çš„è¿™ç¯‡åšæ–‡ï¼Œå°±æœ‰ <a href="./amp">AMP ç‰ˆæœ¬</a>ã€‚</p>
<p>é‚£ä¹ˆå¦‚ä½•è®©æˆ‘ä»¬çš„åšå®¢èƒ½æ”¯æŒ AMP å‘¢ï¼ŸHexo ç¤¾åŒºæœ‰ä¸€ä¸ªå«åš <code>hexo-generator-amp</code> çš„æ’ä»¶å¯ä»¥å¹²è¿™ä¸ªäº‹æƒ…ã€‚</p>
<h2 id="å¼•å…¥-hexo-generator-amp-æ’ä»¶"><a href="#hexo-generator-amp"></a>å¼•å…¥ hexo-generator-amp æ’ä»¶</h2>
<p>å¯ä»¥ä½¿ç”¨ Hexo çš„ <code>hexo-generator-amp</code> æ’ä»¶æ¥å¸®åŠ©æˆ‘ä»¬æ„å»ºå‡º AMP çš„é¡µé¢</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">\# åœ¨ hexo åšå®¢é¡¹ç›®çš„æ ¹ç›®å½•æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤  </span><br><span class="line">npm install --save hexo-generator-amp</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶ï¼Œåšå®¢å·²ç»å…·å¤‡ç”Ÿæˆ AMP é¡µé¢çš„åŸºç¡€äº†ï¼Œç”±äº AMP æ˜¯ä¸€å¥—ç‹¬ç«‹çš„é¡µé¢ï¼Œ<code>hexo-generator-amp</code> æ’ä»¶åªä¼šå¯¹æ–‡ç« é¡µé¢ç”Ÿæˆ AMP é¡µé¢ï¼Œè¦æƒ³éªŒè¯ï¼Œåªéœ€è¦åœ¨åŸæœ¬æ–‡ç« çš„ URL çš„åŸºç¡€ä¸Šåœ¨åé¢åŠ ä¸Š <code>/amp</code> å³å¯ã€‚</p>
<h2 id="é…ç½®-config-yml"><a href="#_configyml-1"></a>é…ç½® _config.yml</h2>
<p><code>hexo-generator-amp</code> æ’ä»¶æ˜¯éœ€è¦ä» <code>_config.yml</code> ä¸­è¯»å–é…ç½®æ‰è¡Œï¼Œé…ç½®å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">\# amp config  </span><br><span class="line">generator_amp:  </span><br><span class="line"> templateDir:  amp-template  </span><br><span class="line"> assetDistDir: amp-dist  </span><br><span class="line"> logo:  </span><br><span class="line"> path: sample/sample-logo.png  </span><br><span class="line"> width: 600  </span><br><span class="line"> height: 60  </span><br><span class="line"> substituteTitleImage:   </span><br><span class="line"> path: sample/sample-substituteTitleImage.png  </span><br><span class="line"> width: 1024  </span><br><span class="line"> height: 800  </span><br><span class="line"> warningLog: false   \# To display warning, please set true.</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œamp-template æ˜¯æŒ‡æ˜æ¸²æŸ“ AMP é¡µé¢æ—¶å€™æ‰€ä½¿ç”¨çš„æ¸²æŸ“æ¨¡ç‰ˆï¼Œè¿™ç§é…ç½®è¡¨æ˜ AMP æ˜¯æœ‰ä¸€å¥—è‡ªå·±çš„ theme, å¦‚æœæƒ³æ”¹å˜é»˜è®¤çš„ AMP ä¸»é¢˜æˆ–è€…å…¶ä»–é…ç½®ï¼Œå¯ä»¥å¯¹ amp-template é‡Œé¢çš„å†…å®¹è¿›è¡ŒäºŒæ¬¡å¼€å‘ã€‚</p>
<h2 id="å°†-amp-é¡µé¢æäº¤-google-æ”¶å½•"><a href="#amp-google"></a>å°† AMP é¡µé¢æäº¤ Google æ”¶å½•</h2>
<p>ç›®å‰ AMP åªèƒ½è¢« Google æœç´¢å¼•æ“æ‰€è§£ææ‰§è¡Œï¼Œæ‰€ä»¥åœ¨æˆ‘ä»¬æ¯å†™å®Œä¸€ç¯‡åšå®¢çš„æ—¶å€™ï¼Œå¯ä»¥å°†ç”Ÿæˆçš„ AMP URL æäº¤ç»™ Google æ”¶å½•ï¼ˆè™½ç„¶è¿™æ˜¯ä¸€ä¸ªå¿§ä¼¤çš„æ•…äº‹ï¼Œä½†æ˜¯èƒ½è¢«å¤–å›½å‹äººè½»å¿«é€Ÿæœç´¢åˆ°å¹¶ä¸”é˜…è¯»ä½“éªŒå¥½ï¼Œä¹Ÿæ˜¯è›®ä¸é”™çš„ä¸€ä¸ªè‡ªæˆ‘å®‰æ…°ï¼‰ã€‚</p>
<p>é¢‡ä¸ºæ— å¥ˆçš„æŠ›å‡ºä¸€ä¸ªä½ å¯èƒ½éœ€è¦æ¢¯å­æ‰èƒ½å¤Ÿå¾—ç€çš„ <a href="https://www.google.com/webmasters/tools/submit-url?hl=zh-CN&amp;pli=1" target="_blank" rel="noopener">Google çš„æ”¶å½•å…¥å£</a> ã€‚</p>
<h1><a href="#pwa"></a>æ·»åŠ  PWA ç‰¹æ€§</h1>
<hr>
<p>PWA æ˜¯ä¸€ç§æ¸è¿›å¼çš„ Web App, æˆ‘ä»¬çš„åšå®¢å…¶å®å°±æ˜¯ä¸€ä¸ª Web App, æ¸è¿›å¼çš„ï¼Œå°±æ˜¯æ…¢æ…¢æ¥ï¼Œä¸€æ­¥ä¸€æ­¥çš„ç”¨ä¸€äº› HTML5 çš„æœ€æ–° API çš„å®ç°å°†æˆ‘ä»¬çš„ç«™ç‚¹çš„ç”¨æˆ·ä½“éªŒåšåˆ°æè‡´ã€‚</p>
<h2 id="ä¸ºä»€ä¹ˆè¦-pwa"><a href="#pwa-1"></a>ä¸ºä»€ä¹ˆè¦ PWA</h2>
<p>åšå®¢ç«™ç‚¹æ˜¯æœ€é€‚åˆæ”¹é€ æˆ PWA çš„ç«™ç‚¹äº†ï¼Œåšå®¢å…·æœ‰è¿™ä¹ˆå‡ ä¸ªç‰¹ç‚¹ï¼š</p>
<ul>
<li>å†…å®¹æ›´æ–°ä¸é¢‘ç¹ï¼Œé™æ€èµ„æºå¯èƒ½å¾ˆä¹…å¾ˆä¹…å¾ˆä¹…éƒ½ä¸ä¼šæ›´æ–°ï¼ˆç‰¹åˆ«é€‚åˆåšç¦»çº¿ç¼“å­˜ï¼‰</li>
<li>åšå®¢æ˜¯é™æ€åŒ–é¡µé¢ï¼ˆç‰¹åˆ«é€‚åˆåšæ•´ç«™çš„ç¦»çº¿å¤„ç†ï¼‰</li>
<li>åšå®¢ä¸€æ›´æ–°ï¼Œæœ€å¥½èƒ½é€šçŸ¥ç²‰ä¸å•¦ï¼ˆè¿™ä¸ªç†ç”±çœŸæ˜¯ä¸€ç‚¹éƒ½ä¸è¿å’Œï¼‰</li>
<li>åšå®¢æ˜¯ä¸ªäººçš„ï¼Œæƒ³æ€ä¹ˆææ€ä¹ˆæï¼ˆå¯ä»¥å°è¯•æ›´å¤šçš„ PWA ç‰¹æ€§)</li>
<li>ã€‚ã€‚ã€‚</li>
</ul>
<p>@TODO: è¿™é‡Œéœ€è¦æ”¾ä¸€ä¸ªè§†é¢‘ï¼Œè¯´æ˜ä¸€ä¸‹ PWA åˆ°åº•æœ‰å¤šå¼ºå¤§ã€‚</p>
<h2 id="æ€ä¹ˆä¸ºåšå®¢åŠ -pwa-ç‰¹æ€§"><a href="#pwa-2"></a>æ€ä¹ˆä¸ºåšå®¢åŠ  PWA ç‰¹æ€§</h2>
<p>ç›®å‰æˆ‘ä»¬å¯ä»¥è½»æ¾åšåˆ°ä¸ºåšå®¢åŠ å…¥ä¸¤ç‚¹ PWA ç‰¹æ€§</p>
<ul>
<li>æ·»åŠ åˆ°ä¸»å±ï¼šManifest</li>
<li>ç¦»çº¿ç¼“å­˜ï¼šService Worker</li>
</ul>
<h3 id="manifest-json"><a href="#manifestjson"></a>manifest.json</h3>
<p>ä¸ºäº†è®©åšå®¢èƒ½å¤Ÿæ·»åŠ åˆ°æ¡Œé¢ï¼Œå¯ä»¥åœ¨ Hexo çš„åšå®¢é¡¹ç›®ä¸‹çš„ <code>/source</code> ç›®å½•ä¸‹å¢åŠ  <code>manifest.json</code> æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;  </span><br><span class="line"> &quot;name&quot;: &quot;ZouMiaojiang&quot;,  </span><br><span class="line"> &quot;short_name&quot;: &quot;Peace&quot;,  </span><br><span class="line"> &quot;icons&quot;: \[  </span><br><span class="line"> &#123;  </span><br><span class="line"> &quot;src&quot;: &quot;/img/icons/icon-192x192.png&quot;,  </span><br><span class="line"> &quot;sizes&quot;: &quot;192x192&quot;,  </span><br><span class="line"> &quot;type&quot;: &quot;image/png&quot;  </span><br><span class="line"> &#125;,  </span><br><span class="line"> &#123;  </span><br><span class="line"> &quot;src&quot;: &quot;/img/icons/icon-512x512.png&quot;,  </span><br><span class="line"> &quot;sizes&quot;: &quot;512x512&quot;,  </span><br><span class="line"> &quot;type&quot;: &quot;image/png&quot;  </span><br><span class="line"> &#125;  </span><br><span class="line"> \],  </span><br><span class="line"> &quot;start_url&quot;: &quot;/&quot;,  </span><br><span class="line"> &quot;background_color&quot;: &quot;#ffffff&quot;,  </span><br><span class="line"> &quot;display&quot;: &quot;standalone&quot;,  </span><br><span class="line"> &quot;theme_color&quot;: &quot;#2874f0&quot;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ï¼Œä½ çš„åšå®¢å°±å¯ä»¥åœ¨å¾ˆå¤š<strong>å®‰å“</strong>æœºä¸Šè¢«æ·»åŠ åˆ°æ¡Œé¢äº†ï¼ˆè¿™ä¸ªåŠŸèƒ½ç›®å‰æ˜¯éœ€è¦åœ¨ç”¨æˆ·åœ¨ç³»ç»Ÿè®¾ç½®é‡Œæ‰“å¼€å¼€å…³çš„ï¼‰ã€‚iOS safari ç›®å‰å¯¹ Manifest çš„æ ‡å‡†æ”¯æŒçš„æ¯”è¾ƒç³Ÿç³•ã€‚</p>
<h4 id="æƒ³-ios-safari-ä¹Ÿèƒ½ä½“éªŒæ›´å¥½çš„æ·»åŠ åˆ°æ¡Œé¢"><a href="#ios-safari"></a>æƒ³ iOS Safari ä¹Ÿèƒ½ä½“éªŒæ›´å¥½çš„æ·»åŠ åˆ°æ¡Œé¢</h4>
<p>ç”±äº iOS ä¸Šæ²¡æœ‰å¯¹ manifest æ ‡å‡†æ”¯æŒçš„å¾ˆå¥½ï¼Œå¹¶ä¸”åªæœ‰ safari æµè§ˆå™¨æœ‰æ·»åŠ åˆ°ä¸»å±ï¼ˆå¿«æ·å›¾æ ‡ï¼‰çš„å…¥å£ï¼Œé‚£æˆ‘ä»¬æƒ³ iOS çš„æ·»åŠ åˆ°æ¡Œé¢çš„ä½“éªŒæ›´å¥½çš„è¯ï¼Œéœ€è¦æ”¹åŠ¨ <code>/themes/yourTheme</code> æ–‡ä»¶å¤¹ä¸‹çš„å†…å®¹äº†ï¼Œä¸ºäº†è®©æ¯ä¸ªåšå®¢é¡µé¢åœ¨ iOS çš„ Safari æµè§ˆå™¨ä¸‹éƒ½èƒ½è¢«æ·»åŠ åˆ°æ¡Œé¢ï¼Œéœ€è¦æ‰¾åˆ° <code>themes/yourTheme/layout/_partial/head.ejs</code>ï¼Œç„¶ååœ¨ <code>&lt;head&gt;</code> çš„é‡Œé¢æ‰¾ä¸ªåœ°æ–¹å¡å…¥å¦‚ä¸‹ html ç‰‡æ®µï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!\-\- Add to home screen for Safari on iOS --&gt;  </span><br><span class="line"> &lt;meta name=&quot;apple-mobile-web-app-capable&quot; content=&quot;yes&quot;&gt;  </span><br><span class="line"> &lt;meta name=&quot;apple-mobile-web-app-status-bar-style&quot; content=&quot;black&quot;&gt;  </span><br><span class="line"> &lt;meta name=&quot;apple-mobile-web-app-title&quot; content=&quot;Peace&quot;&gt;  </span><br><span class="line"> &lt;link rel=&quot;apple-touch-icon&quot; href=&quot;/img/icons/icon-152x152.png&quot;&gt;  </span><br><span class="line"> &lt;link rel=&quot;shortcut icon&quot; href=&quot;&lt;%= config.root %&gt;img/zoumiaojiang.ico&quot;&gt;</span><br></pre></td></tr></table></figure>
<p>å½“ç„¶ï¼Œå›¾ç‰‡è·¯å¾„åç§°æ¢æˆè‡ªå·±çš„å°±å¥½äº†ã€‚</p>
<h4 id="service-worker"><a href="#service-worker"></a>Service Worker</h4>
<p>ä¸Šä¸€ç¯‡æ–‡ç«  <a href="https://zoumiaojiang.com/2017/07/30/how-regist-service-worker-for-pwa/" target="_blank" rel="noopener">å¦‚ä½•ä¼˜é›…çš„ä¸º PWA æ³¨å†Œ Service Woker</a> æåˆ°äº† Service Worker çš„å‘ï¼Œåœ¨ Webpack æ„å»ºç¯å¢ƒä¸‹ï¼Œæœ‰ <code>sw-register-webpack-plugin</code> æ¥å¸®åŠ©è§£å†³ Service Worker çš„æ³¨å†Œé—®é¢˜ã€‚é‚£ä¹ˆåœ¨ Hexo çš„å¼€å‘ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å€ŸåŠ©ä¸€ä¸ªå«åš <code>hexo-service-worker</code> æ’ä»¶æ¥è§£å†³åšå®¢çš„ Service Worker çš„æ³¨å†Œé—®é¢˜ã€‚</p>
<h4 id="hexo-servcie-worker"><a href="#hexo-servcie-worker"></a>hexo-servcie-worker</h4>
<p>åœ¨å¼„åšå®¢çš„æ—¶å€™ï¼Œæ‰¾åˆ°äº†ä¸€ä¸ª <code>hexo-offline</code> çš„ hexo æ’ä»¶ï¼Œç‰¹åˆ«å¥½ç”¨ï¼ŒService Worker èƒ½å¤Ÿæ­£å¸¸æ³¨å†Œï¼Œä½†æ˜¯è¿™ä¸ªæ’ä»¶åªæ˜¯è€ƒè™‘åˆ°äº†åŸºæœ¬çš„ Service Worker çš„æ–‡ä»¶ç”Ÿæˆå’Œæ³¨å†Œï¼Œæ²¡æœ‰è€ƒè™‘åˆ°æ›´æ–°çš„å®æ—¶æ€§ã€å¤šä¸ªé¡µé¢æ³¨å†Œ Service Worker ç­‰é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘å°±è‡ªå·±å†™äº†ä¸ª <a href="https://github.com/zoumiaojiang/hexo-service-worker" target="_blank" rel="noopener">hexo-service-worker</a> çš„æ’ä»¶ã€‚</p>
<blockquote>
<p>å…¶ä¸­æœ‰éƒ¨åˆ† sw-precache ç›¸å…³çš„å†…å®¹æ˜¯å‚è€ƒ <code>hexo-offline</code> æ’ä»¶çš„ï¼Œè¡¨ç¤ºæ„Ÿè°¢ğŸ™ã€‚</p>
</blockquote>
<p>ä½¿ç”¨è¿™ä¸ªæ’ä»¶å¾ˆç®€å•ï¼Œé¦–å…ˆæ˜¯å®‰è£…æ’ä»¶ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save hexo-service-worker</span><br></pre></td></tr></table></figure>
<p>ç„¶åä¿®æ”¹ <code>_config.yml</code> è®©æ’ä»¶ç”Ÿæ•ˆï¼Œé€šå¸¸æˆ‘ä»¬çš„é…ç½®å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">\# service worker  </span><br><span class="line">service_worker:  </span><br><span class="line"> maximumFileSizeToCacheInBytes: 5242880  </span><br><span class="line"> staticFileGlobs:  </span><br><span class="line"> - public/**/*.&#123;js,html,css,png,jpg,gif,svg,eot,ttf,woff,woff2&#125;  </span><br><span class="line"> stripPrefix: public  </span><br><span class="line"> verbose: true  </span><br><span class="line"> runtimeCaching:  </span><br><span class="line"> \- urlPattern: /*  </span><br><span class="line"> handler: cacheFirst  </span><br><span class="line"> options:  </span><br><span class="line"> origin: cdn.a.org  </span><br><span class="line"> \- urlPattern: /*  </span><br><span class="line"> handler: cacheFirst  </span><br><span class="line"> options:  </span><br><span class="line"> origin: cdn.b.com</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„ï¼š</p>
<p>å…¶ä¸­ <code>runtimeCaching</code> çš„é…ç½®æ˜¯ä¸“é—¨é’ˆå¯¹ <strong>ç¬¬ä¸‰æ–¹ CDN èµ„æº(é hexo æœ¬åœ°ç»´æŠ¤çš„é™æ€èµ„æº)</strong> çš„ç¼“å­˜çš„é…ç½®ã€‚</p>
</blockquote>
<p>Service Worker çš„ç”Ÿæ•ˆå¿…é¡»ä¾èµ– HTTPS çš„ï¼Œæƒ³è¦å¯¹ Service Worker æœ‰å…·ä½“çš„äº†è§£å¯ä»¥ <a href="https://lavas.baidu.com/doc/offline-and-cache-loading/service-worker/service-worker-introduction" target="_blank" rel="noopener">æˆ³è¿™</a> ã€‚</p>



                <hr>
                <!-- Pager -->
                <ul class="pager">
                    
                    
                </ul>

                <br>

                <!--æ‰“èµ-->
                
                <!--æ‰“èµ-->

                <br>
                <!--åˆ†äº«-->
                
                    <div class="social-share"  data-wechat-qrcode-helper="" align="center"></div>
                    <!--  css & js -->
                    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>
                
                <!--åˆ†äº«-->
                <br>

                <!-- require APlayer -->
                

                <!-- duoshuo Share start -->
                
                <!-- å¤šè¯´ Share end-->

                <!-- å¤šè¯´è¯„è®ºæ¡† start -->
                
                <!-- å¤šè¯´è¯„è®ºæ¡† end -->

                <!-- disqus comment start -->
                
                <!-- disqus comment end -->

                

            </div>

            <!-- Tabe of Content -->
            <!-- Table of Contents -->

  
    
      <aside id="sidebar">
        <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        
          <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">HTTPS &amp; HTTP/2</span></a></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">æ„å»º AMP</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#å¼•å…¥-hexo-generator-amp-æ’ä»¶"><span class="toc-nav-number">2.1.</span> <span class="toc-nav-text">å¼•å…¥ hexo-generator-amp æ’ä»¶</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#é…ç½®-config-yml"><span class="toc-nav-number">2.2.</span> <span class="toc-nav-text">é…ç½® _config.yml</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#å°†-amp-é¡µé¢æäº¤-google-æ”¶å½•"><span class="toc-nav-number">2.3.</span> <span class="toc-nav-text">å°† AMP é¡µé¢æäº¤ Google æ”¶å½•</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">æ·»åŠ  PWA ç‰¹æ€§</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#ä¸ºä»€ä¹ˆè¦-pwa"><span class="toc-nav-number">3.1.</span> <span class="toc-nav-text">ä¸ºä»€ä¹ˆè¦ PWA</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#æ€ä¹ˆä¸ºåšå®¢åŠ -pwa-ç‰¹æ€§"><span class="toc-nav-number">3.2.</span> <span class="toc-nav-text">æ€ä¹ˆä¸ºåšå®¢åŠ  PWA ç‰¹æ€§</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#manifest-json"><span class="toc-nav-number">3.2.1.</span> <span class="toc-nav-text">manifest.json</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#æƒ³-ios-safari-ä¹Ÿèƒ½ä½“éªŒæ›´å¥½çš„æ·»åŠ åˆ°æ¡Œé¢"><span class="toc-nav-number">3.2.1.1.</span> <span class="toc-nav-text">æƒ³ iOS Safari ä¹Ÿèƒ½ä½“éªŒæ›´å¥½çš„æ·»åŠ åˆ°æ¡Œé¢</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#service-worker"><span class="toc-nav-number">3.2.1.2.</span> <span class="toc-nav-text">Service Worker</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#hexo-servcie-worker"><span class="toc-nav-number">3.2.1.3.</span> <span class="toc-nav-text">hexo-servcie-worker</span></a></li></ol></li></ol></li></ol></li></ol>
        
        </div>
      </aside>
    


            <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                       
                          <a class="tag" href="/tags/#Hexo" title="Hexo">Hexo</a>
                        
                          <a class="tag" href="/tags/#blog" title="blog">blog</a>
                        
                          <a class="tag" href="/tags/#PWA" title="PWA">PWA</a>
                        
                          <a class="tag" href="/tags/#AMP" title="AMP">AMP</a>
                        
                          <a class="tag" href="/tags/#HTTPS" title="HTTPS">HTTPS</a>
                        
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
                <hr>
                <h5>FRIENDS</h5>
                <ul class="list-inline">

                    
                        <li><a href="https://www.cnblogs.com/mingweiyard/" target="_blank">åšå®¢å›­ ç‹æ˜ä¼Ÿ</a></li>
                    
                        <li><a href="https://weibo.com/u/3949419319" target="_blank">æ–°æµªå¾®åš ç‹æ˜ä¼Ÿ</a></li>
                    
                </ul>
                
            </div>
        </div>
    </div>
</article>








<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'hover',
          placement: 'left',
          icon: 'â„¬'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>


<!-- chrome Firefox ä¸­æ–‡é”šç‚¹å®šä½å¤±æ•ˆ-->
<script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>


    <!-- Footer -->
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                
                
                

                

                

                
                    <li>
                        <a target="_blank"  href="https://github.com/FIGHTING-TOP">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; WangMingwei 2019
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="/js/hux-blog.min.js"></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!--
     Because of the native support for backtick-style fenced code blocks
     right within the Markdown is landed in Github Pages,
     From V1.6, There is no need for Highlight.js,
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->


<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("https://fighting-top.github.io/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->


<script>
    // dynamic User by Hux
    var _gaId = 'UA-148144474-1';
    var _gaDomain = 'https://fighting-top.github.io/';

    // Originial
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', _gaId, _gaDomain);
    ga('send', 'pageview');
</script>




<!-- Baidu Tongji -->

<script>
    // dynamic User by Hux
    var _baId = '2db0eaa938a47c0517b5d408d4165198';

    // Originial
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?" + _baId;
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
</script>






	<a id="rocket" href="#top" class=""></a>
	<script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
    <script type="text/javascript" src="/js/toc.js?v=1.0.0" async=""></script>
<!-- Image to hack wechat -->
<img src="https://fighting-top.github.io/img/icon_wechat.png" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

</body>

</html>
